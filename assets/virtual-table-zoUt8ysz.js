import{j as s}from"./index-Br-AeRLR.js";import{r as l,a as ve}from"./router-BDK15HzG.js";import{a as Te,A as Et}from"./virtual-C9-IbyhX.js";import{a as xe,u as N,c as z}from"./utils-BrsFTMAM.js";function ue(e,t){l.useEffect(()=>{const o=Array.isArray(e)?e:[];if(!o.some(i=>i.current))return;function n(i){o.filter(a=>a.current).every(a=>a.current&&!a.current.contains(i.target))&&t()}return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])}const V={GROUP_HEADER_HEIGHT:32,HEADER_HEIGTH:32,FILTER_HEIGHT:28,COLUMN_WIDTH:160,ROW_HEIGHT:28,FOOTER_HEIGHT:32,CARD_FILTER_WIDTH:160,CARD_FILTER_HEIGHT:200,EXPANDED_ROW_HEIGHT:250},st={none:"None",equal:"Equal",notEqual:"Not Equal",startsWith:"Starts with",endsWith:"Ends with",contains:"Contains",notContains:"Not Contains"},le={SEARCH_PER_COLUMN:"search_per_column",FILTER_SELECTION_PER_COLUMN:"filter_selection_per_column",FILTER_ADVANCE_PER_COLUMN:"filter_advance_per_column"};function zt(e,t){return Object.keys(e).find(o=>e[o]===t)}const nt=(e,t)=>{var n,i;const o=(n=e.children)==null?void 0:n.find(r=>r.key===t);return o||((i=e.children)==null?void 0:i.reduce((r,a)=>{var h;if(r)return r;if((h=a.children)!=null&&h.length)return nt(a,t)},void 0))};function Nt(e){const{data:t,isResetFilter:o,onChangeAdvanceFilter:n,useServerAdvanceFilter:i=!1,useSessionFilter:r}=e,a=l.useRef(null),[h,d]=l.useState({show:!1,key:""}),[c,f]=l.useState({});l.useEffect(()=>{o&&f({})},[o]),l.useEffect(()=>{if(r)return window.addEventListener("beforeunload",()=>{sessionStorage.removeItem(le.FILTER_ADVANCE_PER_COLUMN)}),()=>{window.removeEventListener("beforeunload",()=>{})}},[r]),ue([a],()=>d({show:!1,key:""}));const p=l.useCallback(k=>{sessionStorage.setItem(le.FILTER_ADVANCE_PER_COLUMN,JSON.stringify({...JSON.parse(sessionStorage.getItem(le.FILTER_ADVANCE_PER_COLUMN)||"{}"),[(r==null?void 0:r.tableKey)||""]:k}))},[r]),b=l.useMemo(()=>Object.keys(c).length===0||i?t:t.filter(k=>Object.entries(c).every(([u,m])=>{var x;const g=String(k[u]).toLowerCase(),C=(x=m==null?void 0:m.value)==null?void 0:x.toLowerCase();switch(m==null?void 0:m.config_name){case"equal":return g===C;case"notEqual":return g!==C;case"startsWith":return g.startsWith(C);case"endsWith":return g.endsWith(C);case"contains":return g.includes(C);case"notContains":return!g.includes(C);default:return!0}})),[t,c,i]),w=l.useCallback((k,u,m)=>{f(g=>{const C={...g,[k]:{config_name:u,value:m}};return n==null||n(C),r&&p(C),C}),d({show:!1,key:""})},[n]),v=l.useCallback(k=>{f(u=>{const m={...u};return delete m[k],n==null||n(m),r&&p(m),m}),d({show:!1,key:""})},[n]);return{filteredAdvanceData:b,filterAdvanceCardRef:a,isFilterAdvanceCardOpen:h,setIsFilterAdvanceCardOpen:d,updateAdvanceFilter:w,resetAdvanceFilter:v,activeAdvanceFilters:c}}function Lt(e){const{data:t,isResetFilter:o,onChangeFilter:n,useServerFilter:i=!1,useSessionFilter:r}=e,a=l.useRef(null),[h,d]=l.useState({}),[c,f]=l.useState({show:!1,key:""}),p=l.useCallback(()=>d({}),[]);l.useEffect(()=>{o&&p()},[o]),l.useEffect(()=>{if(r)return window.addEventListener("beforeunload",()=>{sessionStorage.removeItem(le.FILTER_SELECTION_PER_COLUMN)}),()=>{window.removeEventListener("beforeunload",()=>{})}},[r]),ue([a],()=>f({show:!1,key:""}));const b=l.useCallback(u=>{sessionStorage.setItem(le.FILTER_SELECTION_PER_COLUMN,JSON.stringify({...JSON.parse(sessionStorage.getItem(le.FILTER_SELECTION_PER_COLUMN)||"{}"),[(r==null?void 0:r.tableKey)||""]:u}))},[r]),w=l.useMemo(()=>Object.keys(h).length===0||i?t:t.filter(u=>Object.entries(h).every(([m,g])=>{const C=u[m];return g.map(j=>typeof C=="number"?Number(j):String(j)).some(j=>C===j)})),[t,h,i]),v=l.useCallback((u,m)=>{d(g=>{const C={...g};return m.length===0?delete C[u]:C[u]=m,n==null||n(C),r&&b(C),C}),f({show:!1,key:""})},[n]),k=l.useCallback(u=>{d(m=>{const g={...m};return delete g[u],n==null||n(g),r&&b(g),g}),f({show:!1,key:""})},[n]);return{filteredData:w,filterCardRef:a,isFilterCardOpen:c,updateFilter:v,resetFilter:k,activeFilters:h,resetAllFilter:p}}function It(e){const{data:t,useServerSearch:o,onChangeSearch:n,isResetFilter:i,useSessionFilter:r}=e,a=l.useRef(null),[h,d]=l.useState({show:!1,key:""}),[c,f]=l.useState({});l.useEffect(()=>{if(r)return window.addEventListener("beforeunload",()=>{sessionStorage.removeItem("search_per_column")}),()=>{window.removeEventListener("beforeunload",()=>{})}},[r]),l.useEffect(()=>{i&&f({})},[i]),ue([a],()=>d({show:!1,key:""}));const p=l.useCallback(u=>{sessionStorage.setItem(le.SEARCH_PER_COLUMN,JSON.stringify({...JSON.parse(sessionStorage.getItem(le.SEARCH_PER_COLUMN)||"{}"),[(r==null?void 0:r.tableKey)||""]:u}))},[r]),b=l.useMemo(()=>!c||Object.keys(c).length===0?t||[]:o?t:(t||[]).filter(u=>Object.entries(c).every(([m,g])=>{var C,x,j;return g.length===0?!0:(j=(x=(C=u[m])==null?void 0:C.toString())==null?void 0:x.toLowerCase())==null?void 0:j.includes(g.toLowerCase())})),[t,c,o]),w=l.useCallback((u,m)=>{f(g=>{const C={...g};return m.length===0?delete C[u]:C[u]=m,n==null||n(C),r&&p(C),C}),d({show:!1,key:""})},[n]),v=l.useCallback(u=>{function m(C,x){const{[x]:j,...R}=C;return R}const g=m(c,u);f(g),n==null||n(g),r&&p(g),d({show:!1,key:""})},[n,c]),k=l.useCallback(()=>f({}),[]);return{searchedData:b,searchCardRef:a,isSearchCardOpen:h,updateSearch:w,resetSearch:v,activeSearch:c,resetAllSearch:k}}function Ft(e){const{data:t,useServerSort:o,onChangeSort:n,isResetFilter:i}=e,[r,a]=l.useState(null),[h,d]=l.useState("unset");l.useEffect(()=>{i&&(a(null),d("unset"))},[i]);const c=l.useMemo(()=>!r||h==="unset"||o?t:[...t].sort((w,v)=>w[r]<v[r]?h==="asc"?-1:1:w[r]>v[r]?h==="asc"?1:-1:0),[t,r,h,o]),f=l.useCallback(b=>{a(w=>{const v=w===b?h==="asc"?"desc":h==="desc"?"unset":"asc":"asc";return d(v),n==null||n(b,v),v==="unset"?null:b})},[h,n]),p=l.useCallback((b,w)=>{a(w==="unset"?null:b),d(w),n==null||n(b,w)},[n]);return{sortedData:c,handleSort:f,handleSpecificSort:p,sortKey:r,sortBy:h}}const Tt=(e,t)=>{const{threshold:o=100,throttleMs:n=100,onScrollTouchBottom:i}=t,r=l.useRef(0),a=l.useRef(null),h=l.useRef(!1),[d,c]=l.useState(!1);l.useEffect(()=>{const b=()=>{e.current&&!d?c(!0):!e.current&&d&&c(!1)};b();const w=setInterval(b,100);return()=>clearInterval(w)},[d,e]);const f=l.useCallback(()=>{const b=e.current;if(!b)return;const{scrollTop:w,scrollHeight:v,clientHeight:k}=b,m=v-w-k<=o;if(m&&!h.current){const g=Date.now();g-r.current>=n&&(r.current=g,i())}h.current=m},[e,o,n,i]),p=l.useCallback(()=>{a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{f()})},[f]);l.useEffect(()=>{if(!d)return;const b=e.current;if(b)return b.addEventListener("scroll",p,{passive:!0}),()=>{b.removeEventListener("scroll",p),a.current&&cancelAnimationFrame(a.current)}},[p,d,e]),l.useEffect(()=>{h.current=!1},[e])},rt=(e,t=0,o)=>{let n=[];return e.forEach(i=>{var r;(r=i.children)!=null&&r.length?n=n.concat(rt(i.children,t+1,i.key)):n.push({col:i,depth:t,parentKey:o})}),n},_e=e=>!e.children||e.children.length===0?[e]:e.children.flatMap(t=>_e(t)),ot=e=>!e.children||e.children.length===0?0:1+Math.max(...e.children.map(t=>ot(t))),lt=e=>_e(e).reduce((t,o)=>t+(o.width||V.COLUMN_WIDTH),0),it=e=>e.map(t=>{const o=t.visible??!0;if(t.children&&t.children.length>0){const n=it(t.children).map(r=>({...r,parentKey:t.key})),i=lt({...t,children:n});return{...t,visible:o,children:n,width:i}}return{...t,visible:o,width:t.width||V.COLUMN_WIDTH}}),He=(e,t,o)=>{if(!e.children||e.children.length===0)return e;const n=e.children.map(r=>r.key===t?{...r,...o}:He(r,t,o)),i=n.reduce((r,a)=>!a.children||a.children.length===0?r+(a.width||V.COLUMN_WIDTH):r+lt(a),0);return{...e,children:n,width:i}},Qe=e=>e.reduce((t,o)=>t+(o.width||0),0),Ht=(e,t)=>{switch(t.type){case"INITIALIZE":{const{columns:o,freezeLeft:n,freezeRight:i}=t.payload;return{...e,columns:o,freezeLeftColumns:n,freezeRightColumns:i}}case"UPDATE_COLUMN":{const{key:o,update:n}=t.payload;return{...e,columns:e.columns.map(i=>i.key===o?{...i,...n}:i)}}case"UPDATE_CHILD_COLUMN":{const{parentKey:o,childKey:n,update:i}=t.payload;return{...e,columns:e.columns.map(r=>r.key!==o?r:He(r,n,i))}}case"UPDATE_FREEZE_COLUMN":{const{key:o,freezeType:n,update:i}=t.payload;return n==="left"?{...e,freezeLeftColumns:e.freezeLeftColumns.map(r=>r.key===o?{...r,...i}:r)}:{...e,freezeRightColumns:e.freezeRightColumns.map(r=>r.key===o?{...r,...i}:r)}}case"UPDATE_FREEZE_CHILD_COLUMN":{const{parentKey:o,childKey:n,freezeType:i,update:r}=t.payload,a=h=>h.map(d=>d.key!==o?d:He(d,n,r));return i==="left"?{...e,freezeLeftColumns:a(e.freezeLeftColumns)}:{...e,freezeRightColumns:a(e.freezeRightColumns)}}case"TOGGLE_FILTER_VISIBILITY":return{...e,isFilterVisible:!e.isFilterVisible};default:return e}},Z=xe(null),he=()=>N(Z,e=>(e==null?void 0:e.columns)??[]),me=()=>N(Z,e=>(e==null?void 0:e.freezeLeftColumns)??[]),ge=()=>N(Z,e=>(e==null?void 0:e.freezeRightColumns)??[]),Ee=()=>N(Z,e=>(e==null?void 0:e.freezeLeftColumnsWidth)??0),ze=()=>N(Z,e=>(e==null?void 0:e.freezeRightColumnsWidth)??0),_t=()=>N(Z,e=>e==null?void 0:e.getDepth),at=()=>N(Z,e=>e==null?void 0:e.getLeaves),Ae=()=>N(Z,e=>e==null?void 0:e.isFilterVisible),At=()=>N(Z,e=>e==null?void 0:e.toggleFilterVisibility),Mt=()=>N(Z,e=>e==null?void 0:e.updateColumn),Ot=()=>N(Z,e=>e==null?void 0:e.updateFreezeColumn),Vt=()=>N(Z,e=>e==null?void 0:e.updateChildColumn),Dt=()=>N(Z,e=>e==null?void 0:e.updateFreezeChildColumn),Wt=({initialColumns:e,children:t})=>{const[o,n]=l.useReducer(Ht,{columns:[],freezeLeftColumns:[],freezeRightColumns:[],isFilterVisible:!0});l.useEffect(()=>{if(!e.length)return;const u=it(e),m=u.filter(x=>!x.freeze),g=u.filter(x=>x.freeze==="left"),C=u.filter(x=>x.freeze==="right");n({type:"INITIALIZE",payload:{columns:m,freezeLeft:g,freezeRight:C}})},[e]);const i=l.useMemo(()=>rt(o.columns),[o.columns]),r=l.useMemo(()=>Qe(o.freezeLeftColumns),[o.freezeLeftColumns]),a=l.useMemo(()=>Qe(o.freezeRightColumns),[o.freezeRightColumns]),h=l.useCallback(_e,[]),d=l.useCallback(ot,[]),c=l.useCallback((u,m)=>{n({type:"UPDATE_COLUMN",payload:{key:u,update:m}})},[]),f=l.useCallback((u,m,g)=>{n({type:"UPDATE_CHILD_COLUMN",payload:{parentKey:u,childKey:m,update:g}})},[]),p=l.useCallback((u,m,g)=>{n({type:"UPDATE_FREEZE_COLUMN",payload:{key:u,freezeType:m,update:g}})},[]),b=l.useCallback((u,m,g,C)=>{n({type:"UPDATE_FREEZE_CHILD_COLUMN",payload:{parentKey:u,childKey:m,freezeType:g,update:C}})},[]),w=l.useCallback(u=>{const m=o.columns.find(g=>g.key===u);m&&c(u,{visible:!m.visible})},[o.columns,c]),v=l.useCallback(()=>{n({type:"TOGGLE_FILTER_VISIBILITY"})},[]),k=l.useMemo(()=>({columns:o.columns,flattenColumns:i,freezeLeftColumns:o.freezeLeftColumns,freezeRightColumns:o.freezeRightColumns,freezeLeftColumnsWidth:r,freezeRightColumnsWidth:a,isFilterVisible:o.isFilterVisible,getLeaves:h,getDepth:d,updateColumn:c,updateChildColumn:f,updateFreezeChildColumn:b,updateFreezeColumn:p,toggleColumnVisibility:w,toggleFilterVisibility:v}),[o.columns,o.freezeLeftColumns,o.freezeRightColumns,o.isFilterVisible,i,r,a,h,d,c,f,b,p,w,v]);return s.jsx(Z.Provider,{value:k,children:t})};function Pt(e,t){const[o,n]=l.useState(new Set),[i,r]=l.useState([]),a=l.useCallback((d,c)=>typeof t=="function"?t(d,c):String(d[t]),[t]);l.useEffect(()=>{if(!e){r([]);return}const d=[];e.forEach((c,f)=>{const p=a(c,f);d.push({type:"row",item:c,key:p}),o.has(p)&&d.push({type:"expanded",item:c,key:p})}),r(d),n(new Set(o))},[e,a]);const h=l.useCallback(d=>{r(c=>{const f=c.findIndex(w=>w.type==="row"&&w.key===d);if(f===-1)return c;const p=c[f+1];return(p==null?void 0:p.type)==="expanded"?(n(w=>{const v=new Set(w);return v.delete(d),v}),[...c.slice(0,f+1),...c.slice(f+2)]):(n(w=>{const v=new Set(w);return v.add(d),v}),[...c.slice(0,f+1),{type:"expanded",item:c[f].item,key:d},...c.slice(f+1)])})},[]);return{flattenedData:i,toggleExpand:h,expandedKeys:o}}function Ut(e){const{containerWidth:t,columns:o,columnVirtualizer:n}=e;l.useEffect(()=>{if(t===0||!n)return;const i=o.filter(h=>h.visible&&!h.noStretch),r=i.reduce((h,d)=>{var c;return(c=d.children)!=null&&c.length?h+d.children.reduce((f,p)=>f+(p.width||V.COLUMN_WIDTH),0):h+(d.width||V.COLUMN_WIDTH)},0),a=o.reduce((h,d)=>{var c;return d.noStretch?(c=d.children)!=null&&c.length?h+d.children.reduce((f,p)=>f+(p.width||V.COLUMN_WIDTH),0):h+(d.width||V.COLUMN_WIDTH):h},0);if(r<t-a){const h=(t-a)/r;i.forEach(d=>{var b;const c=o.indexOf(d),f=d.width*h,p=Math.max(50,f);if(n.resizeItem(c,p),(b=d.children)!=null&&b.length){const w=p/d.width;d.children.forEach(v=>{v.width=v.width*w})}})}},[o,t,n])}const ie=xe(null),Gt=()=>N(ie,e=>(e==null?void 0:e.filteredData)??[]),Bt=()=>N(ie,e=>e==null?void 0:e.tableKey),$t=()=>N(ie,e=>e==null?void 0:e.isResetFilter),Me=()=>N(ie,e=>e==null?void 0:e.sort),Kt=()=>N(ie,e=>e==null?void 0:e.search),qt=()=>N(ie,e=>e==null?void 0:e.selection),Xt=()=>N(ie,e=>e==null?void 0:e.advance),Zt=e=>{const{children:t,dataSource:o,isResetFilter:n,useServerFilter:i,onChangeFilter:r,useSessionFilter:a}=e,{sortKey:h,sortBy:d,handleSort:c,sortedData:f,handleSpecificSort:p}=Ft({data:o||[],isResetFilter:n,useServerSort:i==null?void 0:i.sort,onChangeSort:r==null?void 0:r.sort}),{searchedData:b,activeSearch:w,updateSearch:v,resetSearch:k}=It({data:f||[],isResetFilter:n,useSessionFilter:a,useServerSearch:i==null?void 0:i.search,onChangeSearch:r==null?void 0:r.search}),{filteredData:u,updateFilter:m,resetFilter:g}=Lt({data:b||[],isResetFilter:n,useSessionFilter:a,useServerFilter:i==null?void 0:i.selection,onChangeFilter:r==null?void 0:r.selection}),{filteredAdvanceData:C,updateAdvanceFilter:x,resetAdvanceFilter:j}=Nt({data:u||[],isResetFilter:n,useSessionFilter:a,useServerAdvanceFilter:i==null?void 0:i.advance,onChangeAdvanceFilter:r==null?void 0:r.advance}),R=l.useMemo(()=>({sortBy:d,sortKey:h,onChangeSort:c,onChangeSpecificSort:p}),[d,h,c,p]),y=l.useMemo(()=>({activeSearch:w,updateSearch:v,resetSearch:k}),[w,v,k]),S=l.useMemo(()=>({updateFilter:m,resetFilter:g}),[m,g]),E=l.useMemo(()=>({updateAdvanceFilter:x,resetAdvanceFilter:j}),[x,j]),F=l.useMemo(()=>({tableKey:a==null?void 0:a.tableKey,isResetFilter:n,filteredData:C,sort:R,search:y,selection:S,advance:E}),[a==null?void 0:a.tableKey,n,C,R,y,S,E]);return s.jsx(ie.Provider,{value:F,children:t})},Jt=[],Q=xe(null),Yt=()=>N(Q,e=>(e==null?void 0:e.flattenedData)??[]),Qt=()=>N(Q,e=>(e==null?void 0:e.rowVirtualizer)??null),Oe=()=>N(Q,e=>(e==null?void 0:e.columnVirtualizer)??null),ct=()=>N(Q,e=>(e==null?void 0:e.rowVirtualItems)??[]),Ve=()=>N(Q,e=>(e==null?void 0:e.columnVirtualItems)??[]),De=()=>N(Q,e=>(e==null?void 0:e.containerWidth)??0),dt=()=>N(Q,e=>(e==null?void 0:e.containerHeight)??0),es=()=>N(Q,e=>e==null?void 0:e.toggleExpandRow),We=()=>N(Q,e=>(e==null?void 0:e.enableColumnVirtualization)??!1),ut=()=>N(Q,e=>(e==null?void 0:e.useDynamicRowHeight)??!1),ts=e=>{const{children:t,scrollElementRef:o,rowKey:n,enableColumnVirtualization:i=!0,useDynamicRowHeight:r=!1}=e,[a,h]=l.useState(0),[d,c]=l.useState(0),f=he(),p=Gt();l.useEffect(()=>{const R=new ResizeObserver(y=>{const{width:S,height:E}=y[0].contentRect;h(S),c(E)});return o.current&&R.observe(o.current),()=>R.disconnect()},[o]);const{flattenedData:b,toggleExpand:w,expandedKeys:v}=Pt(p,n),k=l.useMemo(()=>i?f.length:0,[i,f.length]),u=Te({horizontal:!0,count:k,getScrollElement:()=>o.current,estimateSize:R=>{var y;return((y=f[R])==null?void 0:y.width)||V.COLUMN_WIDTH},overscan:5}),m=Te({count:b.length,getScrollElement:()=>o.current,estimateSize:()=>V.ROW_HEIGHT,overscan:20});Ut({containerWidth:a,columns:f,columnVirtualizer:i?u:null});const g=m.getVirtualItems(),C=i?u.getVirtualItems():Jt,x=l.useCallback(R=>{w(R)},[w]),j=l.useMemo(()=>({flattenedData:b,rowVirtualizer:m,columnVirtualizer:u,containerWidth:a,containerHeight:d,rowVirtualItems:g,columnVirtualItems:C,toggleExpandRow:x,expandedRows:v,enableColumnVirtualization:i,useDynamicRowHeight:r}),[b,m,u,a,d,g,C,x,v,i,r]);return s.jsx(Q.Provider,{value:j,children:t})},te=xe(null),Pe=()=>N(te,e=>(e==null?void 0:e.freezeColLeftPositions)??[]),Ue=()=>N(te,e=>(e==null?void 0:e.freezeColRightPositions)??[]),Ge=()=>N(te,e=>(e==null?void 0:e.calcTotalTableWidth)??0),ss=()=>N(te,e=>(e==null?void 0:e.useFooter)??!1),ns=()=>N(te,e=>(e==null?void 0:e.filterHeight)??V.FILTER_HEIGHT),ht=()=>N(te,e=>(e==null?void 0:e.headerMode)??"double"),rs=()=>N(te,e=>(e==null?void 0:e.expandedContent)??(()=>null)),Be=()=>N(te,e=>(e==null?void 0:e.calcHeaderTotalHeight)??0),os=()=>N(te,e=>e==null?void 0:e.classNameCell),ls=e=>{const{children:t,filterHeight:o,expandedContent:n,useFooter:i=!1,headerMode:r,headerHeight:a,isFilterVisible:h=!0,classNameCell:d}=e,c=he(),f=me(),p=ge(),b=Ee(),w=ze(),v=_t(),k=Oe(),u=We(),m=l.useMemo(()=>u&&k?k.getTotalSize():c.reduce((E,F)=>E+(F.width||0),0),[u,k,c]),g=l.useMemo(()=>f.reduce((E,F,L)=>{const _=L===0?0:E[L-1]+(f[L-1].width||0);return[...E,_]},[]),[f]),C=l.useMemo(()=>p.reduce((E,F,L)=>{const _=L===0?0:E[L-1]+(p[L-1].width||0);return[...E,_]},[]),[p]),x=l.useMemo(()=>m+b+w,[m,b,w]),j=l.useMemo(()=>{const E=Math.max(0,...c.map(_=>v(_)),...f.map(_=>v(_)),...p.map(_=>v(_)));return(r==="single"?a:a+(h?o:0))+V.GROUP_HEADER_HEIGHT*E},[r,a,o,h,c,f,p,v]),R=l.useMemo(()=>n||(()=>null),[n]),y=l.useMemo(()=>d,[d]),S=l.useMemo(()=>({freezeColLeftPositions:g,freezeColRightPositions:C,calcTotalTableWidth:x,useFooter:i,filterHeight:o,headerMode:r,calcHeaderTotalHeight:j,expandedContent:R,classNameCell:y}),[g,C,x,i,o,r,j,R,y]);return s.jsx(te.Provider,{value:S,children:t})};function is(){const e=ct(),t=dt(),o=Be();if(!e.length)return s.jsx("div",{className:"sticky left-0",style:{height:t},children:s.jsx("div",{className:"size-full relative flex justify-center items-center",style:{paddingTop:o},children:s.jsx("p",{className:"text-lg font-medium text-gray-400",children:"Tidak ada data yang tersedia"})})})}function as(){return s.jsx("div",{className:"z-[99999] absolute inset-0 bg-black/10 backdrop-blur-sm flex justify-center items-center",children:s.jsx("div",{className:z("border-[.625rem] !border-t-blue-950 border-gray-100","border-solid rounded-full animate-spin size-[4.375rem]")})})}function ft({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("w-6 h-6",e),...t,children:s.jsx("path",{fill:"currentColor",d:"m7.05 5.636l4.95 4.95l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.415 1.414l-4.95-4.95l-4.949 4.95l-1.414-1.414l4.95-4.95l-4.95-4.95z"})})}const ye=l.forwardRef(({onClickEnter:e,className:t,onRemoveSearch:o,value:n,onChange:i,onDebouncedChange:r,debounceDelay:a=300,...h},d)=>{const[c,f]=l.useState(""),p=l.useRef(void 0),b=l.useCallback(w=>{const v=w.target.value;f(v),i==null||i(w),p.current&&clearTimeout(p.current),r&&(p.current=setTimeout(()=>{r(v)},a))},[i,r,a]);return l.useEffect(()=>{n!==void 0&&f(String(n))},[n]),l.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),s.jsxs("div",{className:"!w-full relative group/input",children:[s.jsx("input",{ref:d,type:"text",placeholder:"",className:z("outline-none border bg-white dark:bg-black/50 border-gray-200 rounded h-[1.625rem] px-1.5 w-full text-xs focus:border-blue-950","transition-all duration-300 font-medium",t),value:c,onChange:b,onKeyDown:w=>w.key==="Enter"&&(e==null?void 0:e()),...h}),!h.disabled&&s.jsx(ft,{onClick:o,className:z("!w-4 absolute right-1 top-1/2 -translate-y-1/2 text-gray-600 cursor-pointer","opacity-0 group-hover/input:opacity-100 transition-opacity duration-200 hover:text-red-600")})]})});ye.displayName="InputSearch";function pt({handleMouseDown:e}){return s.jsx("div",{className:"w-1 h-full absolute right-0 cursor-col-resize bg-transparent group-hover/outer:bg-blue-100",onMouseDown:e})}function cs(e){const{checked:t,onChecked:o,label:n,classNameLabel:i,...r}=e;return s.jsxs("label",{className:"flex cursor-pointer",children:[s.jsxs("div",{className:z("size-4 relative shrink-0",n&&"mr-2"),children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 cursor-pointer absolute opacity-0 z-[100]",checked:t,onChange:a=>o&&o(a.target.checked),...r}),s.jsx("div",{className:z("size-4 flex justify-center items-center border border-gray-400 rounded-xs absolute",{"bg-blue-950":t,"bg-white":!t}),children:t&&s.jsx(ds,{})})]}),typeof n=="string"?s.jsx("span",{className:z("text-xs font-normal truncate",i),children:n}):n]})}function ds(){return s.jsx("svg",{width:"12",height:"9",viewBox:"0 0 12 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1.5 4L4.57407 7L10.5 1",stroke:"white",strokeWidth:"2"})})}const us=l.memo(cs);function hs({className:e,...t}){return s.jsx("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,...t,children:s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.62 0.715366C14.0533 1.05776 14.127 1.68662 13.7846 2.11996L6.67352 11.12C6.49823 11.3418 6.23722 11.4791 5.95509 11.4978C5.67297 11.5165 5.3961 11.4149 5.19304 11.2182L0.30415 6.48135C-0.0924933 6.09704 -0.102493 5.46395 0.281814 5.06731C0.666122 4.67066 1.29921 4.66067 1.69585 5.04497L5.63124 8.85797C5.71629 8.94038 5.85392 8.93125 5.92734 8.83833L12.2154 0.880042C12.5578 0.446701 13.1866 0.372972 13.62 0.715366Z",fill:"currentColor"})})}function fs({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("size-6",e),...t,children:s.jsx("path",{fill:"currentColor",d:"m5.84 9.59l5.66 5.66l5.66-5.66l-.71-.7l-4.95 4.95l-4.95-4.95z"})})}function ps({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("size-6",e),...t,children:s.jsx("path",{fill:"currentColor",d:"M4.006 16.385v-8.77q0-.666.474-1.14T5.621 6h12.763q.667 0 1.141.475T20 7.615v8.77q0 .666-.475 1.14t-1.14.475H5.62q-.666 0-1.14-.475t-.475-1.14m1.61.615h3.382V7H5.616q-.231 0-.424.192T5 7.616v8.769q0 .23.192.423t.423.192m4.383 0h3.998V7H9.998zm4.998 0h3.383q.23 0 .423-.192t.192-.423v-8.77q0-.23-.192-.423T18.379 7h-3.383z"})})}function ms({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("size-6",e),...t,children:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{d:"M6 11c0-2.828 0-4.243.879-5.121C7.757 5 9.172 5 12 5h3c2.828 0 4.243 0 5.121.879C21 6.757 21 8.172 21 11v5c0 2.828 0 4.243-.879 5.121C19.243 22 17.828 22 15 22h-3c-2.828 0-4.243 0-5.121-.879C6 20.243 6 18.828 6 16z"}),s.jsx("path",{d:"M6 19a3 3 0 0 1-3-3v-6c0-3.771 0-5.657 1.172-6.828S7.229 2 11 2h4a3 3 0 0 1 3 3",opacity:.5})]})})}function gs({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",className:z("size-5",e),...t,children:s.jsx("path",{fill:"currentColor",d:"m9.129 0l1.974.005c.778.094 1.46.46 2.022 1.078c.459.504.7 1.09.714 1.728h5.475a.69.69 0 0 1 .686.693a.69.69 0 0 1-.686.692l-1.836-.001v11.627c0 2.543-.949 4.178-3.041 4.178H5.419c-2.092 0-3.026-1.626-3.026-4.178V4.195H.686A.69.69 0 0 1 0 3.505c0-.383.307-.692.686-.692h5.47c.014-.514.205-1.035.554-1.55C7.23.495 8.042.074 9.129 0m6.977 4.195H3.764v11.627c0 1.888.52 2.794 1.655 2.794h9.018c1.139 0 1.67-.914 1.67-2.794zM6.716 6.34c.378 0 .685.31.685.692v8.05a.69.69 0 0 1-.686.692a.69.69 0 0 1-.685-.692v-8.05c0-.382.307-.692.685-.692m2.726 0c.38 0 .686.31.686.692v8.05a.69.69 0 0 1-.686.692a.69.69 0 0 1-.685-.692v-8.05c0-.382.307-.692.685-.692m2.728 0c.378 0 .685.31.685.692v8.05a.69.69 0 0 1-.685.692a.69.69 0 0 1-.686-.692v-8.05a.69.69 0 0 1 .686-.692M9.176 1.382c-.642.045-1.065.264-1.334.662c-.198.291-.297.543-.313.768l4.938-.001c-.014-.291-.129-.547-.352-.792c-.346-.38-.73-.586-1.093-.635z"})})}function ws({className:e}){return s.jsxs("svg",{viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:z("w-[1.125rem] h-[1.125rem]",e),children:[s.jsx("path",{d:"M7.875 4.125C7.875 3.50368 8.37868 3 9 3C9.62132 3 10.125 3.50368 10.125 4.125C10.125 4.74632 9.62132 5.25 9 5.25C8.37868 5.25 7.875 4.74632 7.875 4.125Z",fill:"currentColor"}),s.jsx("path",{d:"M7.875 9C7.875 8.37868 8.37868 7.875 9 7.875C9.62132 7.875 10.125 8.37868 10.125 9C10.125 9.62132 9.62132 10.125 9 10.125C8.37868 10.125 7.875 9.62132 7.875 9Z",fill:"currentColor"}),s.jsx("path",{d:"M7.875 13.875C7.875 13.2537 8.37868 12.75 9 12.75C9.62132 12.75 10.125 13.2537 10.125 13.875C10.125 14.4963 9.62132 15 9 15C8.37868 15 7.875 14.4963 7.875 13.875Z",fill:"currentColor"})]})}function Cs({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("size-6",e),...t,children:s.jsx("path",{fill:"currentColor",d:"M6.532 4.75h6.936c.457 0 .854 0 1.165.03c.307.028.685.095.993.348c.397.326.621.814.624 1.322c.002.39-.172.726-.34.992c-.168.27-.411.59-.695.964l-.031.04l-.01.013l-2.555 3.369c-.252.332-.315.42-.359.51a1.2 1.2 0 0 0-.099.297c-.02.1-.023.212-.023.634v4.243c0 .208 0 .412-.014.578c-.015.164-.052.427-.224.663c-.21.287-.537.473-.9.495c-.302.019-.547-.103-.69-.183c-.144-.08-.309-.195-.476-.31l-.989-.683l-.048-.033c-.191-.131-.403-.276-.562-.477a1.7 1.7 0 0 1-.303-.585c-.071-.244-.07-.5-.07-.738v-2.97c0-.422-.004-.534-.023-.634a1.2 1.2 0 0 0-.1-.297c-.043-.09-.106-.178-.358-.51L4.825 8.459l-.01-.012l-.03-.04c-.284-.375-.527-.695-.696-.965c-.167-.266-.34-.602-.339-.992a1.72 1.72 0 0 1 .624-1.322c.308-.253.686-.32.993-.349c.311-.029.707-.029 1.165-.029m.397 4l1.647 2.17l.035.047c.201.264.361.475.478.715q.154.317.222.665c.051.261.05.527.05.864v2.968c0 .158.001.247.005.314l.006.062a.2.2 0 0 0 .036.073l.041.034c.05.04.12.088.248.176l.941.65V13.21c0-.337 0-.603.051-.864q.068-.347.222-.665c.117-.24.277-.45.478-.715l.035-.046l1.646-2.17zm7.28-1.5c.195-.26.334-.45.43-.604c.08-.126.104-.188.11-.207a.22.22 0 0 0-.057-.134a1 1 0 0 0-.2-.032c-.232-.022-.556-.023-1.06-.023H6.568c-.504 0-.828 0-1.06.023a1 1 0 0 0-.2.032a.22.22 0 0 0-.057.134c.006.019.03.081.11.207c.096.155.235.344.43.604zm1.541 3.25a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75m-1.5 2.5a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75m-.5 2.5a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75m0 2.5a.75.75 0 0 1 .75-.75H17a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75"})})}function bs({className:e,...t}){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:z("size-6",e),stroke:"currentColor",...t,children:s.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:10,strokeWidth:1.5,d:"M21.25 12H8.895m-4.361 0H2.75m18.5 6.607h-5.748m-4.361 0H2.75m18.5-13.214h-3.105m-4.361 0H2.75m13.214 2.18a2.18 2.18 0 1 0 0-4.36a2.18 2.18 0 0 0 0 4.36Zm-9.25 6.607a2.18 2.18 0 1 0 0-4.36a2.18 2.18 0 0 0 0 4.36Zm6.607 6.608a2.18 2.18 0 1 0 0-4.361a2.18 2.18 0 0 0 0 4.36Z"})})}function ys({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:z("size-6",e),...t,children:s.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6h18M3 12h18M3 18h18"})})}function vs({className:e,...t}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:z("size-12",e),...t,children:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:4,children:[s.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),s.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})})}function xs({sort:e="unset",className:t,...o}){return s.jsxs("div",{className:z("flex flex-col",t),...o,children:[s.jsx(Ss,{sort:e}),s.jsx(ks,{sort:e})]})}function ks({sort:e}){return s.jsx("svg",{className:"-mt-1",stroke:"currentColor",fill:e==="desc"?"#333":"#ccc",strokeWidth:"0",version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24",height:"11",width:"11",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M5.8 9.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.4-.3.7s.1.5.3.7z"})})}function Ss({sort:e}){return s.jsx("svg",{stroke:"currentColor",fill:e==="asc"?"#333":"#ccc",strokeWidth:"0",version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24",height:"11",width:"11",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M18.2 13.3l-6.2-6.3-6.2 6.3c-.2.2-.3.5-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7z"})})}const Rs={close:e=>s.jsx(ft,{...e}),chevron:e=>s.jsx(fs,{...e}),column:e=>s.jsx(ps,{...e}),copy:e=>s.jsx(ms,{...e}),sort:e=>s.jsx(xs,{...e}),delete:e=>s.jsx(gs,{...e}),dotsVertical:e=>s.jsx(ws,{...e}),filterAdvance:e=>s.jsx(Cs,{...e}),filterMultiple:e=>s.jsx(bs,{...e}),search:e=>s.jsx(vs,{...e}),menu:e=>s.jsx(ys,{...e}),check:e=>s.jsx(hs,{...e})};function js({name:e,...t}){const o=Rs[e];return s.jsx(o,{...t})}const ae=l.memo(js);function Es(e){const{options:t=[],value:o,onSelect:n}=e,[i,r]=l.useState(!1),a=h=>{n==null||n(h),r(!1)};return s.jsxs("div",{className:"relative w-full",children:[s.jsx(zs,{value:o||"",isOpen:i,onToggle:r}),i&&s.jsx("div",{className:"absolute top-full mt-1 w-full border border-gray-50 shadow rounded-sm bg-white dark:bg-black z-40",children:s.jsx("div",{className:"flex flex-col items-start",children:t.length?t.map(h=>s.jsx("div",{className:z("px-1.5 py-1 hover:bg-blue-50 dark:hover:bg-blue-900 cursor-pointer w-full text-start font-normal",o===h&&"bg-blue-100 dark:bg-blue-900"),onClick:()=>a(h),children:h},h)):s.jsx("div",{className:"py-5 flex justify-center items-center",children:s.jsx("span",{className:"text-gray-500 text-xs font-normal",children:"No data available!"})})})})]})}const zs=e=>{const{value:t,isOpen:o,onToggle:n}=e;return s.jsxs("div",{className:"border border-gray-200 rounded h-[1.625rem] pl-1.5 w-full flex justify-between items-center hover:bg-gray-50 cursor-pointer dark:hover:bg-black/50",onClick:()=>n(i=>!i),children:[s.jsx("span",{className:"text-xs font-normal",children:t}),s.jsx(ae,{name:"chevron",className:z("w-5 text-gray-500 me-0.5 transition-all duration-100",o&&"rotate-180")})]})};function $e({onReset:e,onApply:t}){return s.jsxs("div",{className:"flex justify-end space-x-2.5 border-t border-gray-300 px-1.5 py-2 mt-1.5",children:[s.jsx("button",{className:"cursor-pointer",onClick:e,children:"Reset"}),s.jsx("button",{className:"cursor-pointer px-1.5 py-0.5 bg-blue-950 text-white rounded",onClick:t,children:"Filter"})]})}const Ne=l.forwardRef(({children:e,className:t,...o},n)=>s.jsx("div",{ref:n,className:z("absolute top-full right-0 mt-1 bg-white dark:bg-black/50 dark:backdrop-blur-2xl shadow-md z-[99999] rounded-sm border border-gray-50 w-40 text-xs",t),...o,children:e}));function Ns({checked:e}){return s.jsx("div",{className:"flex justify-center items-center w-full h-full",children:s.jsx("input",{type:"checkbox","data-name":"header-checkbox",className:"w-4 h-4 cursor-pointer accent-blue-950",checked:e,readOnly:!0})})}const mt=l.memo(Ns);function Ls({isExpanded:e=!1}){return s.jsx("div",{className:"flex justify-center items-center w-full h-full",children:s.jsx("button",{"data-action":"expand",className:"hover:bg-gray-300 transition-colors rounded cursor-pointer",type:"button","aria-label":e?"Collapse row":"Expand row",children:s.jsx(ae,{name:"chevron",className:z("!size-5",e?"rotate-0":"-rotate-90")})})})}const et=l.memo(Ls),Is=l.forwardRef(({headValue:e,className:t,children:o,...n},i)=>s.jsx("div",{ref:i,className:z("font-semibold border-b border-[#D2D2D4] px-1.5 bg-[#EFF0F6] dark:bg-black text-xs content-center h-full global-report-title !text-[12px]",t),...n,children:e||o})),Fs=l.memo(Is),Ts=l.forwardRef((e,t)=>{const{cellValue:o,className:n,children:i,...r}=e;return s.jsx("div",{ref:t,className:z("border-b border-[#D2D2D4] px-1.5 text-xs content-center global-report-content !text-[12px]",n),...r,children:o||i})}),gt=l.memo(Ts),Hs=(e,t)=>{if(!e)return[];const o=e.filter(n=>typeof n=="string"||typeof n=="number");return t?o.filter(n=>String(n).toLowerCase().includes(t.toLowerCase())):o};function _s(e){const{options:t,headerKey:o,onApplyFilter:n,onResetFilter:i,isResetFilter:r,initialSelectedOptions:a=[]}=e,h=l.useRef(null),d=l.useRef(null),[c,f]=l.useState({show:!1,position:{top:0,left:0}}),[p,b]=l.useState(""),[w,v]=l.useState(a||[]),k=l.useMemo(()=>Hs(t||[],p),[t,p]);l.useEffect(()=>{r&&(b(""),v([]))},[r]),ue([h],()=>{c.show&&f({show:!1,position:{top:0,left:0}})});const u=Te({count:k.length,getScrollElement:()=>d.current,estimateSize:()=>24,overscan:5}),m=()=>{n(w),f({show:!1,position:{top:0,left:0}})},g=()=>{i(),v([]),f({show:!1,position:{top:0,left:0}})},C=y=>{v(S=>S.includes(y)?S.filter(E=>E!==y):[...S,y])},x=y=>{const S=y.currentTarget.getBoundingClientRect(),E=window.innerWidth,F=window.innerHeight,L=S.left-V.CARD_FILTER_WIDTH/2,_=S.top+25,$=S.left+V.CARD_FILTER_WIDTH/2,P=S.top+V.CARD_FILTER_HEIGHT+37,D=$>E,U=L<0,q=P>F;let X=L,se=_;D?X=E-V.CARD_FILTER_WIDTH-10:U&&(X=10),q&&(se=S.top-(P-F)-20),f(K=>({...K,show:!0,position:{top:se,left:X}}))},j=t.length<1,R=k.length<1;return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[w.length>0&&s.jsx("div",{className:"absolute top-0 -right-1 size-2 rounded-full bg-blue-950 z-10"}),s.jsx(ae,{name:"filterMultiple",className:z("shrink-0 w-3.5 text-gray-500 hover:text-gray-900 dark:hover:text-gray-200 cursor-pointer",c.show?"!text-gray-900 dark:!text-gray-200":"text-gray-500 dark:text-gray-700"),onClick:x})]}),c.show&&ve.createPortal(s.jsxs(Ne,{ref:h,className:"fixed",style:{top:c.position.top,left:c.position.left},children:[!j&&s.jsx("div",{className:"px-1.5 pt-1.5",children:s.jsx(ye,{id:`filter-selection-search-${o}`,value:p,onChange:y=>b(y.target.value)})}),s.jsx(As,{scrollRef:d,rowVirtualizer:u,options:k,headerKey:o,isEmptyOptions:R,isCheked:y=>w.includes(y||""),onCheckboxChange:C}),s.jsx($e,{onApply:m,onReset:g})]}),document.body)]})}const As=e=>{const{options:t,headerKey:o,rowVirtualizer:n,isCheked:i,isEmptyOptions:r,onCheckboxChange:a,scrollRef:h}=e;return s.jsx("div",{ref:h,className:z("relative overflow-auto h-40 my-1.5 mx-1.5 filter-scrollbar",r&&"!h-16"),children:r?s.jsx("div",{className:"size-full flex justify-center items-center",children:s.jsx("span",{className:"text-gray-400 text-xs font-normal",children:"No data available!"})}):s.jsx("div",{style:{height:n.getTotalSize()},children:n.getVirtualItems().map(d=>{const c=t[d.index];return s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${d.size}px`,transform:`translateY(${d.start}px)`},children:s.jsx(us,{id:`filter-selection-checkbox-${o}-${d.index}`,label:c,checked:i(c),onChecked:()=>a(c)})},d.key)})})})},Ms=l.memo(_s),wt=Object.values(st).map(e=>e),je={show:!1,position:{top:0,left:0}},Fe={config_name:wt[0],value:""};function Os(e){const{headerKey:t,onApplyFilter:o,onResetFilter:n,isResetFilter:i,initialFilterValue:r}=e,a=l.useRef(null),[h,d]=l.useState(je),[c,f]=l.useState(r||Fe);l.useEffect(()=>{i&&f(Fe)},[i]),ue([a],()=>h.show&&d(je));const p=k=>{f(u=>({...u,config_name:k})),k==="None"&&f(u=>({...u,value:""}))},b=()=>{const k=zt(st,c.config_name);o(k,c.value),d(je)},w=()=>{n(),f(Fe),d(je)},v=k=>{const u=k.currentTarget.getBoundingClientRect(),m=window.innerWidth,g=window.innerHeight,C=u.left-V.CARD_FILTER_WIDTH/2,x=u.top+25,j=u.left+V.CARD_FILTER_WIDTH/2,R=u.top+V.CARD_FILTER_HEIGHT+37,y=j>m,S=C<0,E=R>g;let F=C,L=x;y?F=m-V.CARD_FILTER_WIDTH-10:S&&(F=10),E&&(L=u.top-37),d(_=>({..._,show:!0,position:{top:L,left:F}}))};return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[c.config_name!=="None"&&c.value.length>0&&s.jsx("div",{className:"absolute top-0 -right-1 size-2 rounded-full bg-blue-950 z-10"}),s.jsx(ae,{name:"filterAdvance",className:z("shrink-0 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 cursor-pointer",h.show?"!text-gray-600 dark:!text-gray-200":"text-gray-400 dark:text-gray-700"),onClick:v})]}),h.show&&ve.createPortal(s.jsxs(Ne,{ref:a,className:"fixed",style:{top:h.position.top,left:h.position.left},children:[s.jsxs("div",{className:"p-1.5 w-full flex flex-col items-start space-y-1",children:[s.jsx("span",{className:"text-xs text-gray-800 dark:text-gray-200",children:"Filter dengan"}),s.jsx(Es,{options:wt,value:c.config_name,onSelect:p}),c.config_name!=="None"&&s.jsx(ye,{id:`filter-advance-value-${t}`,disabled:c.config_name==="None",value:c.value,onChange:k=>f(u=>({...u,value:k.target.value}))})]}),s.jsx($e,{onApply:b,onReset:w})]}),document.body)]})}const Vs=l.memo(Os);function Ds(e){const{mode:t,headerKey:o,onSearchChange:n,onSearchClear:i,isResetFilter:r,initialSearch:a}=e,h=l.useRef(null),[d,c]=l.useState(a||""),[f,p]=l.useState({show:!1,pos:{top:0,left:0}});l.useEffect(()=>{r&&c("")},[r]),ue([h],()=>{f.show&&p({show:!1,pos:{top:0,left:0}})});const b=u=>{u.key==="Enter"&&n(d)},w=()=>{d.length&&(i(),c(""))},v=()=>{d.length&&(n(d),p({show:!1,pos:{top:0,left:0}}))},k=u=>{const m=u.currentTarget.getBoundingClientRect();p({show:!0,pos:{top:m.top+30,left:m.left-V.CARD_FILTER_WIDTH/2}})};return t==="direct-search"?s.jsx(ye,{className:"bg-white !h-6",value:d,onChange:u=>c(u.target.value),onClickEnter:()=>n(d),onRemoveSearch:w}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"relative",children:s.jsx(ae,{name:"search",onClick:k,className:z("shrink-0 w-3.5 text-gray-500 hover:text-gray-900 dark:hover:text-gray-200 cursor-pointer",f.show?"!text-gray-900 dark:!text-gray-200":"text-gray-500 dark:text-gray-700")})}),f.show&&ve.createPortal(s.jsxs(Ne,{ref:h,className:"fixed",style:{top:f.pos.top,left:f.pos.left},children:[s.jsx("div",{className:"p-1",children:s.jsx(ye,{id:"filter-search-"+o,className:"!w-full bg-white",onKeyDown:b,onRemoveSearch:w,value:d,onChange:u=>c(u.target.value)})}),s.jsx($e,{onReset:w,onApply:v})]}),document.body)]})}const Ws=l.memo(Ds),Ps=({headerKey:e,filterSelectionOptions:t,headerMode:o,hideFilter:n})=>{var x,j,R;const i=Bt(),r=Kt(),a=Me(),h=qt(),d=Xt(),c=$t(),f=ns(),p=o==="single",b=p?"auto":f,w=n==null?void 0:n.filterSelection,v=n==null?void 0:n.filterAdvance,k=n==null?void 0:n.sort,u=n==null?void 0:n.search,m=JSON.parse(sessionStorage.getItem("search_per_column")||"{}"),g=JSON.parse(sessionStorage.getItem("filter_selection_per_column")||"{}"),C=JSON.parse(sessionStorage.getItem("filter_advance_per_column")||"{}");return s.jsxs("div",{style:{height:b},className:z("flex items-center space-x-1.5",p?"w-max pr-2.5":"w-full px-1.5"),children:[!u&&s.jsx(Ws,{mode:p?"popout-card":"direct-search",headerKey:e,onSearchChange:y=>r.updateSearch(e,y),onSearchClear:()=>r.resetSearch(e),isResetFilter:c,initialSearch:((x=m==null?void 0:m[i||""])==null?void 0:x[e])||""}),!w&&s.jsx(Ms,{headerKey:(e==null?void 0:e.toString())||"",options:t,onApplyFilter:y=>h.updateFilter(e,y),onResetFilter:()=>h.resetFilter(e),isResetFilter:c,initialSelectedOptions:((j=g==null?void 0:g[i||""])==null?void 0:j[e])||[]}),!v&&s.jsx(Vs,{headerKey:(e==null?void 0:e.toString())||"",initialFilterValue:((R=C==null?void 0:C[i||""])==null?void 0:R[e])||{config_name:"None",value:""},onResetFilter:()=>d.resetAdvanceFilter(e),onApplyFilter:(y,S)=>d.updateAdvanceFilter(e,y,S),isResetFilter:c}),p&&!k&&s.jsx(ae,{name:"sort",className:"cursor-pointer",sort:e===a.sortKey?a.sortBy:"unset",onClick:()=>a.onChangeSort(e.toString())})]})},Ct=l.memo(Ps),Us=e=>{const{width:t,emptyPadding:o,children:n}=e;return s.jsx("div",{"data-name":"row-expanded",style:{width:t},className:z("border-b border-gray-200",o&&"p-2"),children:n})},Gs=l.memo(Us),tt=["Sort Ascending","Sort Descending","Unsort"];function Bs({headerKey:e,hideFilterSort:t}){const o=l.useRef(null),[n,i]=l.useState({show:!1,pos:{x:0,y:0}}),r=At(),a=Ae(),h=Me();ue([o],()=>i({show:!1,pos:{x:0,y:0}}));const d=p=>{p.stopPropagation();const b=p.currentTarget.getBoundingClientRect(),w=window.innerWidth,v=window.innerHeight,k=b.x-V.CARD_FILTER_WIDTH/2,u=b.y+20,m=b.x+V.CARD_FILTER_WIDTH/2,g=b.y+V.CARD_FILTER_HEIGHT+37,C=m>w,x=k<0,j=g>v;let R=k,y=u;C?R=w-V.CARD_FILTER_WIDTH-10:x&&(R=10),j&&(y=b.top-37),i({show:!0,pos:{x:R,y}})},c=(p,b)=>{var v;p.stopPropagation();const w={"Sort Ascending":()=>h.onChangeSpecificSort(e,"asc"),"Sort Descending":()=>h.onChangeSpecificSort(e,"desc"),Unsort:()=>h.onChangeSpecificSort(e,"unset"),"Tutup Filter":()=>r(),"Buka Filter":()=>r()};(v=w[b])==null||v.call(w)},f=l.useMemo(()=>[...t?tt.filter(b=>!["Sort Ascending","Sort Descending","Unsort"].includes(b)):tt,a?"Tutup Filter":"Buka Filter"],[t,a]);return s.jsxs("div",{className:"relative",children:[s.jsx(ae,{name:"menu",className:"!size-4 text-gray-500 cursor-pointer",onClick:d}),n.show&&ve.createPortal(s.jsx(Ne,{ref:o,className:"fixed z-50",style:{top:n.pos.y,left:n.pos.x},children:f.map((p,b)=>s.jsx("span",{onClick:w=>c(w,p),className:"relative py-2 px-3 flex items-center hover:bg-blue-950 hover:text-white cursor-pointer",children:p},p+b))}),document.body)]})}const $s=l.memo(Bs);function Ks({isSingleHeader:e,isFilterVisible:t,caption:o,headerKey:n,hideFilterSort:i}){const r=Me();return e?o:s.jsxs("div",{className:z("flex-1 flex w-full justify-between items-center px-1.5 cursor-pointer",{"border-b border-[#D2D2D4]":t,"!cursor-default":i}),onClick:()=>!i&&r.onChangeSort(n.toString()),children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[o,!i&&s.jsx(ae,{name:"sort",className:"cursor-pointer",sort:n===r.sortKey?r.sortBy:"unset",onClick:()=>r.onChangeSort(n.toString())})]}),s.jsx($s,{headerKey:n,hideFilterSort:i})]})}const bt=l.memo(Ks);function yt(e){var x,j;const{headData:t,parentKey:o,parentVirtualIndex:n,cellClassName:i,cellStyles:r,freezeType:a}=e,h=Ae(),d=me(),c=ge(),f=he(),p=Dt(),b=Vt(),w=Oe(),v=ht(),k=(R,y)=>{R.preventDefault();const{parentKey:S,childKey:E,parentVirtualIndex:F,freezeType:L}=y,_=R.clientX,$=L==="left"?d.find(K=>K.key===S):L==="right"?c.find(K=>K.key===S):f.find(K=>K.key===S);if(!$)return;const P=nt($,E);if(!P)return;const D=P.width??0,U=$.width??0,q=document.getElementById("resize-line");q.style.display="block",q.style.left=`${R.clientX}px`;const X=K=>{q.style.left=`${K.clientX}px`},se=K=>{q.style.display="none";const Le=K.clientX-_,we=Math.max(50,D+Le);if(L)p(S,E,L,{width:we});else{const Ie=Math.max(50,U-D+we);b(S,E,{width:we}),typeof F=="number"&&(w==null||w.resizeItem(F,Ie))}window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",se)};window.addEventListener("mousemove",X),window.addEventListener("mouseup",se)},u=v==="single",m=t==null?void 0:t.renderHeader,g=!t.children||t.children.length===0,C=(R,y,S=0)=>{if(!S)return 0;const E=a==="left"?d.find(D=>D.key===R):a==="right"?c.find(D=>D.key===R):f.find(D=>D.key===R);if(!(E!=null&&E.width))return S;const F=typeof y=="number"?w==null?void 0:w.getVirtualItems():null,L=F==null?void 0:F.find(D=>{var U;return((U=f[D.index])==null?void 0:U.key)===R}),_=(L==null?void 0:L.size)??E.width,$=E.width,P=_/$;return S*P};if(g){const R=C(o,n,t.width);return s.jsxs("div",{className:z("group/outer relative border-gray-200 flex h-full",a==="right"?"border-l":"border-r",u?"flex-row justify-between items-center px-1":"flex-col justify-between items-start",i),style:{minWidth:R,width:R,...r},children:[!m&&s.jsxs(s.Fragment,{children:[s.jsx(bt,{isSingleHeader:u,isFilterVisible:h,headerKey:t.key,caption:t==null?void 0:t.caption,hideFilterSort:((x=t==null?void 0:t.hideFilter)==null?void 0:x.sort)||!1}),h&&s.jsx(Ct,{headerMode:v,headerKey:t==null?void 0:t.key,filterSelectionOptions:(t==null?void 0:t.filterSelectionOptions)||[],hideFilter:t==null?void 0:t.hideFilter}),s.jsx(pt,{handleMouseDown:y=>{k(y,{parentKey:o,freezeType:a,parentVirtualIndex:n,childKey:t.key})}})]}),m&&m()]})}return s.jsxs("div",{className:z("relative border-gray-200 !px-0 flex flex-col h-full",{"group/outer":!t.children,"border-r":a!=="right","border-l":a==="right"&&!t.children}),style:{minWidth:t.width},children:[s.jsx("div",{style:{minHeight:V.GROUP_HEADER_HEIGHT},className:z("w-full border-b border-gray-200 text-center content-center flex items-center justify-center",a==="right"&&"border-l"),children:t.caption}),s.jsx("div",{className:"flex-1 w-full flex min-h-0",children:(j=t.children)==null?void 0:j.map(R=>s.jsx(yt,{headData:R,parentKey:o,parentVirtualIndex:n,freezeType:a},"nested-header-cell-"+R.key))})]},"table-head-group-node-"+t.key)}const qs=l.memo(yt),re=xe(null),Xs=()=>N(re,e=>(e==null?void 0:e.selectedRowKey)??null),Zs=()=>N(re,e=>(e==null?void 0:e.selectedRowKeys)??new Set),vt=()=>N(re,e=>(e==null?void 0:e.deselectedRowKeys)??new Set),Js=()=>N(re,e=>(e==null?void 0:e.expandedRowKeys)??new Set),Ke=()=>N(re,e=>(e==null?void 0:e.selectAll)??!1),Ys=()=>N(re,e=>e==null?void 0:e.onClickRow),Qs=()=>N(re,e=>e==null?void 0:e.toggleRowSelection),en=()=>N(re,e=>e==null?void 0:e.toggleSelectAll),tn=e=>{const{children:t,onChangeCheckboxRowSelection:o}=e,[n,i]=l.useState(null),[r,a]=l.useState(new Set),[h,d]=l.useState(new Set),[c,f]=l.useState(new Set),[p,b]=l.useState(!1),w=l.useCallback(g=>{i(g)},[]),v=l.useCallback(g=>{if(p){f(C=>{if(C.has(g)){const j=new Set(C);return j.delete(g),o==null||o([],Array.from(j),!1),j}const x=new Set(C).add(g);return o==null||o([],Array.from(x),!1),x});return}d(C=>{if(C.has(g)){const j=new Set(C);return j.delete(g),o==null||o(Array.from(j),[],!1),j}const x=new Set(C).add(g);return o==null||o(Array.from(x),[],!1),x})},[p,o]),k=l.useCallback(g=>{o==null||o([],[],g),b(g),d(new Set),f(new Set)},[o]),u=l.useCallback(g=>{a(C=>{const x=new Set(C);return x.has(g)?x.delete(g):x.add(g),x})},[]),m=l.useMemo(()=>({selectedRowKey:n,selectedRowKeys:h,deselectedRowKeys:c,selectAll:p,expandedRowKeys:r,toggleExpandRow:u,setSelectedRowKey:i,onClickRow:w,toggleRowSelection:v,toggleSelectAll:k}),[n,h,c,p,r,u,w,v,k]);return s.jsx(re.Provider,{value:m,children:t})};function be(e){var E;const{headData:t,headVirtualIndex:o,cellStyles:n,cellClassName:i,freezeType:r}=e,a=Ae(),h=me(),d=ge(),c=he(),f=Mt(),p=Ot(),b=Ke(),w=vt(),v=Oe(),k=ht(),u=(t==null?void 0:t.key)==="row-selection",m=(t==null?void 0:t.key)==="expand",g=(t==null?void 0:t.key)==="action",C=k==="single",x=t==null?void 0:t.key.startsWith("group-header-"),j=!u&&!m&&!g&&!x,R=t==null?void 0:t.renderHeader,y=t==null?void 0:t.hideFilter,S=l.useCallback((F,L,_)=>{F.preventDefault();const $=F.clientX;let P;_==="left"?P=h[L].width:_==="right"?P=d[L].width:P=c[L].width;const D=document.getElementById("resize-line");D.style.display="block",D.style.left=`${F.clientX}px`;const U=X=>{requestAnimationFrame(()=>{D.style.left=`${X.clientX}px`})},q=X=>{D.style.display="none";const se=X.clientX-$,K=Math.max(50,P+se);requestAnimationFrame(()=>{_==="left"?p(h[L].key,"left",{width:K}):_==="right"?p(d[L].key,"right",{width:K}):(f(c[L].key,{width:K}),v==null||v.resizeItem(L,K))}),window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",q)};window.addEventListener("mousemove",U),window.addEventListener("mouseup",q)},[h,d,c,p,f,v]);return s.jsxs(Fs,{style:n,className:z("flex size-full relative",{"group/outer":!x,"!px-0 flex flex-col":x,"flex-row justify-between items-center":C&&!x,"flex-col justify-between items-start !px-0":!C&&!x},i),children:[x&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{height:V.GROUP_HEADER_HEIGHT},className:z("w-full border-b border-gray-200 text-center content-center",r==="right"?"border-l":"border-r"),children:t==null?void 0:t.caption}),s.jsx("div",{className:"flex-1 w-full flex min-h-0",children:(E=t==null?void 0:t.children)==null?void 0:E.map(F=>s.jsx(qs,{headData:F,parentKey:t.key,parentVirtualIndex:o,freezeType:r},"header-cell-nested-"+r+"-"+F.key))})]}),R&&R(),!R&&j&&s.jsxs(s.Fragment,{children:[s.jsx(bt,{isSingleHeader:C,isFilterVisible:a,headerKey:t==null?void 0:t.key,caption:t==null?void 0:t.caption,hideFilterSort:(y==null?void 0:y.sort)||!1}),a&&s.jsx(Ct,{headerMode:k,headerKey:t==null?void 0:t.key,hideFilter:y,filterSelectionOptions:(t==null?void 0:t.filterSelectionOptions)||[]}),s.jsx(pt,{handleMouseDown:F=>S(F,o,r)})]}),!R&&u&&s.jsx(mt,{checked:b&&!w.size})]})}function sn(e){const{rowKey:t,rowData:o,isRowChecked:n,isRowExpanded:i,column:r,isVisible:a=!0,isRowHighlighted:h=!1,isFirstIndex:d=!1,isLastIndex:c=!1,position:f,freezeMode:p="none",freezeLeftColumnsWidth:b=0,freezeRightColumnsWidth:w=0,rowIndex:v=0,columnIndex:k=0}=e,u=os(),m=ut(),g=(r==null?void 0:r.key)==="row-selection",C=(r==null?void 0:r.key)==="expand",x=l.useMemo(()=>String(o[r==null?void 0:r.key]||""),[o,r==null?void 0:r.key]),j=r==null?void 0:r.renderCell,R=r==null?void 0:r.renderExpandToggle,y=l.useMemo(()=>u?u(o,v,k):"",[u,o,v,k]),S=l.useMemo(()=>{const L={"group-hover/row-cells:!bg-[#ECEEFF] dark:group-hover/row-cells:!bg-[#2F3574] group-hover/row-cells:!text-black-100":!h,"!hidden":!a};return p==="left"?z("table-cell border-r bg-white dark:bg-black/50 backdrop-blur-2xl break-words",y,{...L,truncate:!m,"!border-b !border-l !border-t !border-y-[#2F3574] nth-[1]:border-l-[#2F3574]":h}):p==="right"?z("table-cell border-l bg-white dark:bg-black/50 backdrop-blur-2xl break-words",y,{...L,truncate:!m,"!border-y !border-y-[#2F3574]":h,"!border-r !border-r-[#2F3574]":h&&c}):z("table-cell border-r break-words",y,{...L,truncate:!m,"!border-r-transparent":c&&!h,"!border-r-[#2F3574]":c&&h&&!w,"border-l border-l-[#2F3574]":h&&!b&&d,"nth-last-[1]:!border-r-[#2F3574]":h&&!w,"!border-b !border-t !border-y-[#2F3574]":h})},[p,h,a,b,w,d,c,y,m]),E=l.useMemo(()=>m?{flex:`0 0 ${f.width}px`,top:0,minWidth:f.width,maxWidth:f.width,minHeight:f.height}:{position:"absolute",minHeight:f.height,transform:`translateX(${f.left}px)`,minWidth:f.width,width:f.width,top:0},[f.height,f.left,f.width,m]),F=l.useMemo(()=>{if(g)return s.jsx(mt,{checked:n});if(C){if(!R)return s.jsx(et,{isExpanded:i});const L=R(o,i);return typeof L>"u"||L===null?s.jsx(et,{isExpanded:i}):L}return(j==null?void 0:j(o))||x||""},[g,C,n,i,j,o,x,R]);return s.jsx(gt,{"data-row-key":t,"data-row-index":v,"data-cell-index":k,"data-col-key":String(r.key),className:S,style:E,children:F},"table-cell-"+String(r.key))}const oe=l.memo(sn);function nn(e){const{column:t,isVisible:o=!0,isLastIndex:n=!1,freezeMode:i="none",freezeRightColumnsWidth:r=0,position:a}=e,h=l.useMemo(()=>i==="left"?z("bg-gray-50 border-t border-r truncate !px-0",{"!hidden":!o}):i==="right"?z("bg-gray-50 border-t border-l nth-[1]:!border-l truncate !px-0",{"!hidden":!o}):z("bg-gray-50 table-cell truncate border-t border-r nth-last-[1]:!border-r-transparent !px-0",{"!border-r-transparent":n&&r>0,"!hidden":!o}),[i,o,n,r]),d=l.useMemo(()=>({position:"absolute",height:a.height,transform:`translateX(${a.left}px)`,width:a.width,top:0}),[a.height,a.left,a.width]),c=l.useMemo(()=>{var f;return(f=t.renderFooter)==null?void 0:f.call(t)},[t.renderFooter]);return s.jsx(gt,{"data-col-key":String(t.key),className:h,style:d,children:c},"table-footer-cell-"+String(t.key))}const pe=l.memo(nn);function rn(){return ve.createPortal(s.jsx("div",{id:"resize-line",style:{position:"fixed",top:0,width:"1px",height:"100vh",background:"#dbeafe",display:"none",zIndex:999999,pointerEvents:"none"}}),document.body)}const on=l.forwardRef((e,t)=>{const{className:o,...n}=e,i=he(),r=me(),a=ge(),h=Ee(),d=ze(),c=Ve(),f=De(),p=We(),b=Ke(),w=en(),v=Pe(),k=Ue(),u=Ge(),m=Be(),g=y=>{const S=y.target,E=S.closest('[data-name="header-checkbox"]');!S||!E||!(S.type==="checkbox")||w(!b)},C=()=>r.map((y,S)=>{const E=y==null?void 0:y.children;return s.jsx(be,{freezeType:"left",headData:y,headVirtualIndex:S,cellStyles:{position:"absolute",transform:`translateX(${v[S]}px)`,height:m,width:y.width,top:0},cellClassName:z(!E&&"border-r")},"table-head-freeze-left-"+y.key)}),x=()=>a.map((y,S)=>{const E=y==null?void 0:y.children;return s.jsx(be,{headData:y,headVirtualIndex:S,freezeType:"right",cellStyles:{position:"absolute",transform:`translateX(${k[S]}px)`,height:m,width:y.width,top:0},cellClassName:z(!E&&"border-l")},"table-head-freeze-right-"+y.key)}),j=()=>c==null?void 0:c.map(y=>{const S=i[y.index],E=S==null?void 0:S.children,F=y.index===i.length-1;return s.jsx(be,{headData:S,headVirtualIndex:y.index,cellStyles:{position:"absolute",transform:`translateX(${y.start+h}px)`,height:m,width:y.size,top:0},cellClassName:z(!E&&"border-r",F&&"border-r-transparent")},"table-head-"+y.key)}),R=()=>{let y=h;return i.flatMap((S,E)=>{const F=S==null?void 0:S.children,L=S.key.startsWith("group-header-"),_=E===i.length-1;if(L&&F){const D=y,U=S.width||0;return y+=U,[s.jsx(be,{headData:S,headVirtualIndex:E,cellStyles:{position:"absolute",transform:`translateX(${D}px)`,height:m,width:U,top:0},cellClassName:z("border-r")},"table-head-regular-group-"+String(S.key))]}const $=y,P=S.width||0;return y+=P,[s.jsx(be,{headData:S,headVirtualIndex:E,cellStyles:{position:"absolute",transform:`translateX(${$}px)`,height:m,width:P,top:0},cellClassName:z(!F&&"border-r",_&&"border-r-transparent")},"table-head-regular-"+String(S.key))]})};return s.jsx("div",{className:z("sticky top-0 z-10",o),onChange:g,ref:t,...n,children:s.jsxs("div",{className:"table-header relative flex h-full",style:{width:u},children:[s.jsx("div",{className:"sticky left-0 z-20 h-full",style:{width:h},children:C()}),s.jsx("div",{className:"sticky z-20 h-full",style:{left:f-d},children:x()}),p?j():R(),s.jsx(rn,{})]})})}),ln=l.memo(on),an=({footerHeight:e})=>{const t=he(),o=me(),n=ge(),i=Ee(),r=ze(),a=at(),h=dt(),d=De(),c=Ve(),f=Ge(),p=Pe(),b=Ue(),w=()=>o.flatMap((u,m)=>{if(u.key.startsWith("group-header-")){let C=0;return a(u).map(x=>{const j=p[m]+C;return C+=x.width||0,s.jsx(pe,{column:x,freezeMode:"left",position:{left:j,width:x.width,height:e}},"table-footer-cell-freeze-left-group-"+String(x.key))})}return[s.jsx(pe,{column:u,freezeMode:"left",position:{left:p[m],width:u.width,height:e}},"table-footer-cell-freeze-left-"+String(u.key))]}),v=()=>n.flatMap((u,m)=>{if(u.key.startsWith("group-header-")){let C=0;return a(u).map(x=>{const j=b[m]+C;return C+=x.width||0,s.jsx(pe,{column:x,freezeMode:"right",position:{left:j,width:x.width,height:e}},"table-footer-cell-freeze-right-group-"+String(x.key))})}return[s.jsx(pe,{column:u,freezeMode:"right",position:{left:b[m],width:u.width,height:e}},"table-footer-cell-freeze-right-"+String(u.key))]}),k=()=>c.flatMap((u,m)=>{const g=t==null?void 0:t[u.index],C=m===c.length-1;if(g==null?void 0:g.key.startsWith("group-header-")){const j=u.start+i;let R=0;return a(g).map(y=>{const S=j+R;return R+=y.width||0,s.jsx(pe,{column:y,isLastIndex:C,freezeRightColumnsWidth:r,position:{left:S,width:y.width,height:e}},"table-footer-cell-virtualized-group-"+u.key+"-"+String(y.key))})}return[s.jsx(pe,{column:g,isLastIndex:C,freezeRightColumnsWidth:r,position:{left:u.start+i,width:u.size,height:e}},"table-footer-cell-virtualized-"+u.key)]});return s.jsx("div",{className:"sticky z-30 bottom-0",style:{height:e,top:h-e},children:s.jsxs("div",{className:"relative flex",style:{width:f},children:[s.jsx("div",{className:"sticky left-0 z-40",style:{width:i},children:w()}),s.jsx("div",{className:"sticky z-40",style:{left:d-r},children:v()}),k()]})})},cn=l.memo(an),dn=l.forwardRef((e,t)=>{var Xe;const{footerHeight:o,rowHeight:n,onClickRowToParent:i,onDoubleClickRowToParent:r,onRightClickRowToParent:a}=e,h=me(),d=ge(),c=ze(),f=Ee(),p=he(),b=at(),w=ut(),v=Yt(),k=Qt(),u=ct(),m=Ve(),g=De(),C=We(),x=Ke(),j=Ys(),R=Xs(),y=Zs(),S=vt(),E=Qs(),F=es(),L=Js(),_=ss(),$=rs(),P=Ge(),D=Pe(),U=Ue(),q=Be(),X=l.useMemo(()=>{const I=new Map;return v.forEach(A=>{A.type==="row"&&I.set(String(A.key),A.item)}),I},[v]),se=I=>{const A=I.target.closest("div.table-cell"),M=I.target.closest('[data-action="expand"]');if(A&&!M&&i){const T=A.getAttribute("data-row-key"),W=Number(A.getAttribute("data-row-index")),H=Number(A.getAttribute("data-cell-index")),O=X.get(T||"");j==null||j(T),i==null||i(O,W,H)}if(M){I.preventDefault(),I.stopPropagation();const T=M.closest("div.table-cell");if(!T)return;const W=T==null?void 0:T.getAttribute("data-row-key");W&&F(W)}},K=I=>{if(I.target.closest('[data-action="expand"]')||!r){I.preventDefault(),I.stopPropagation();return}const M=I.target.closest("div");if(!M)return;const T=M.getAttribute("data-row-key"),W=Number(M.getAttribute("data-row-index")),H=Number(M.getAttribute("data-cell-index")),O=X.get(T||"");r==null||r(O,W,H)},Le=I=>{if(I.preventDefault(),!a)return;const A=I.target.closest("div");if(!A)return;const M=A.getAttribute("data-row-key"),T=X.get(M||"");j==null||j(M),a==null||a(T,{x:I.clientX,y:I.clientY})},we=I=>{const A=I.target;if(!A)return;if(A.type==="checkbox"){const T=A.closest("div.table-cell");if(!T)return;const W=T.getAttribute("data-row-key");W&&E(W);return}},Ie=((k==null?void 0:k.getTotalSize())??0)+(_?o:0),xt=(I,A,M,T,W)=>h.flatMap((H,O)=>{const B=I===String(R);if(H.key.startsWith("group-header-")){let ee=0;return b(H).map((J,Y)=>{const ce=D[O]+ee;return ee+=J.width||0,s.jsx(oe,{freezeMode:"left",rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:J,isVisible:J.visible,isRowHighlighted:B,rowIndex:W,columnIndex:Y,position:{left:ce,width:J.width,height:n}},"table-cell-freeze-left-group-"+String(J.key))})}return[s.jsx(oe,{freezeMode:"left",rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:H,isVisible:H.visible,isRowHighlighted:B,rowIndex:W,columnIndex:O,position:{left:D[O],width:H.width,height:n}},"table-cell-freeze-left-"+String(H.key))]}),kt=(I,A,M,T,W)=>d.flatMap((H,O)=>{const B=I===String(R),G=H.key.startsWith("group-header-"),ee=O===d.length-1;if(G){let J=0;return b(H).map((Y,ce)=>{const fe=U[O]+J;return J+=Y.width||0,s.jsx(oe,{freezeMode:"right",rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:Y,isVisible:Y.visible,isRowHighlighted:B,isLastIndex:ee,rowIndex:W,columnIndex:ce,position:{left:fe,width:Y.width,height:n}},"table-cell-freeze-right-group-"+String(Y.key))})}return[s.jsx(oe,{freezeMode:"right",rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:H,isVisible:H.visible,isRowHighlighted:B,isLastIndex:ee,rowIndex:W,columnIndex:O,position:{left:U[O],width:H.width,height:n}},"table-cell-freeze-right-"+String(H.key))]}),St=(I,A,M,T,W)=>{const H=[];return m.forEach(O=>{const B=p==null?void 0:p[O.index];(B==null?void 0:B.key.startsWith("group-header-"))?b(B).forEach(J=>{H.push({header:J,isGroupChild:!0})}):H.push({header:B,isGroupChild:!1})}),m.flatMap((O,B)=>{const G=p==null?void 0:p[O.index],ee=I===String(R);if(G==null?void 0:G.key.startsWith("group-header-")){const de=O.start+f;let ke=0;return b(G).map((ne,Se)=>{const Re=(ne.width||0)*(G.width?O.size/G.width:1),Ze=de+ke;ke+=Re;const Je=H.findIndex(Ye=>Ye.header.key===ne.key&&Ye.isGroupChild),Rt=Je===0,jt=Je===H.length-1;return s.jsx(oe,{rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:ne,isVisible:ne.visible,isRowHighlighted:ee,isFirstIndex:Rt,isLastIndex:jt,rowIndex:W,columnIndex:Se,position:{left:Ze,width:Re,height:n},freezeLeftColumnsWidth:f,freezeRightColumnsWidth:c},"table-cell-group-child-"+O.key+"-"+String(ne.key))})}const Y=H.findIndex(de=>de.header.key===(G==null?void 0:G.key)&&!de.isGroupChild),ce=Y===0,fe=Y===H.length-1;return[s.jsx(oe,{rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:G,isVisible:G==null?void 0:G.visible,isRowHighlighted:ee,isFirstIndex:ce,isLastIndex:fe,rowIndex:W,columnIndex:B,position:{left:O.start+f,width:O.size,height:n},freezeLeftColumnsWidth:f,freezeRightColumnsWidth:c},"table-cell-"+O.key)]})},qe=(I,A,M,T,W)=>{let H=f;return p.flatMap((O,B)=>{const G=I===String(R);if(O.key.startsWith("group-header-")){const ce=H;let fe=0;const de=b(O),ke=de.map((Ce,ne)=>{const Se=Ce.width||0,Re=ce+fe;return fe+=Se,s.jsx(oe,{rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:Ce,isVisible:Ce.visible,isRowHighlighted:G,isFirstIndex:B===0&&ne===0,isLastIndex:B===p.length-1&&ne===de.length-1,rowIndex:W,columnIndex:ne,position:{left:Re,width:Se,height:n}},"table-cell-regular-group-child-"+String(O.key)+"-"+String(Ce.key))});return H+=O.width||0,ke}const J=H,Y=O.width||0;return H+=Y,[s.jsx(oe,{rowKey:I,rowData:A,isRowChecked:M,isRowExpanded:T,column:O,isVisible:O.visible,isRowHighlighted:G,isFirstIndex:B===0,isLastIndex:B===p.length-1,rowIndex:W,columnIndex:B,position:{left:J,width:Y,height:n}},"table-cell-regular-"+String(O.key))]})};return s.jsx("div",{ref:t,onClick:se,onDoubleClick:K,onContextMenu:Le,onChange:we,style:{position:"relative",top:q,height:Ie},children:s.jsx("div",{className:"absolute top-0 left-0 w-full",style:{transform:`translateY(${((Xe=u==null?void 0:u[0])==null?void 0:Xe.start)||0}px)`},children:u.map(I=>{const A=v[I.index],M=A.item,T=String(A.key),W=L.has(T),H=x?!S.has(T):y.has(T);return s.jsxs("div",{"data-index":I.index,ref:k==null?void 0:k.measureElement,className:"group/row",children:[s.jsx("div",{style:{minHeight:n,width:P},children:s.jsxs("div",{className:"relative h-full w-full flex group/row-cells",children:[s.jsx("div",{className:z("sticky left-0 z-20",w&&"flex"),style:{width:f},children:xt(T,M,H,W,I.index)}),s.jsx("div",{className:z("sticky z-20",w&&"flex"),style:{left:g-c},children:kt(T,M,H,W,I.index)}),C?St(T,M,H,W,I.index):w?s.jsx("div",{className:"flex",style:{marginLeft:-c},children:qe(T,M,H,W,I.index)}):qe(T,M,H,W,I.index)]})}),W&&s.jsx(Gs,{width:P,emptyPadding:!$,children:($==null?void 0:$(M))||"No expanded content available."})]},I.key)})})})}),un=l.memo(dn);function hn(e,t){const{rowKey:o,data:n,headers:i,useDynamicRowHeight:r=!1,headerMode:a="double",rowHeight:h=V.ROW_HEIGHT,headerHeight:d=V.HEADER_HEIGTH,filterHeight:c=V.FILTER_HEIGHT,footerHeight:f=V.FOOTER_HEIGHT,isLoading:p=!1,isResetFilter:b=!1,useFooter:w=!1,useAutoSizer:v=!0,useSessionFilter:k,useServerFilter:u={sort:!1,search:!1,selection:!1,advance:!1},enableColumnVirtualization:m=!0,classNameOuterTable:g,classNameCell:C,onClickRow:x,onDoubleClickRow:j,onRightClickRow:R,onChangeCheckboxRowSelection:y,onRenderExpandedContent:S,onChangeFilter:E,onScroll:F,onScrollTouchBottom:L}=e,_=l.useRef(null);l.useEffect(()=>{_.current&&(typeof t=="function"?t(_.current):t&&(t.current=_.current))},[t,_.current]),Tt(_,{threshold:100,throttleMs:100,onScrollTouchBottom:L||(()=>{})});const $=l.useMemo(()=>i.map(D=>({...D,visible:!0,width:D.width||V.COLUMN_WIDTH})),[i]),P=(D,U)=>s.jsx(Wt,{initialColumns:$,children:s.jsx(Zt,{dataSource:n,useServerFilter:u,onChangeFilter:E,isResetFilter:b,useSessionFilter:k,children:s.jsx(ts,{rowKey:o,scrollElementRef:_,enableColumnVirtualization:m,useDynamicRowHeight:r,children:s.jsx(tn,{onChangeCheckboxRowSelection:y,children:s.jsx(ls,{filterHeight:c,useFooter:w,expandedContent:q=>S==null?void 0:S(q),headerMode:a,headerHeight:d,classNameCell:C,children:s.jsxs("div",{ref:_,"data-table-container":!0,className:z("w-full h-full overflow-auto relative border border-[#8E8F93]",p&&"pointer-events-none",g),style:{...v&&D&&U?{width:D,height:U}:{},scrollbarGutter:"stable",overflowAnchor:"none"},onScroll:q=>F==null?void 0:F(q.currentTarget.scrollTop,q.currentTarget.scrollLeft),children:[s.jsx(ln,{}),s.jsx(un,{headerHeight:d,footerHeight:f,filterHeight:c,rowHeight:h,headerMode:a,onClickRowToParent:x,onDoubleClickRowToParent:j,onRightClickRowToParent:R}),w&&s.jsx(cn,{footerHeight:f}),!p&&s.jsx(is,{})]})})})})})});return v?s.jsxs("div",{className:"w-full h-full relative",children:[s.jsx(Et,{children:({width:D,height:U})=>P(D,U)}),p&&s.jsx(as,{})]}):P()}const wn=l.forwardRef(hn);export{wn as V,ue as u};
//# sourceMappingURL=virtual-table-zoUt8ysz.js.map
